{"version":3,"file":"index.js","sources":["../src/js/global-notification.js","../src/js/form-validation.js","../src/js/rating-modal.js","../src/js/favorites.js","../src/js/header.js","../src/js/exercise-modal.js","../src/js/exercises.js","../src/js/email-validation.js","../src/js/quote.js","../src/main.js"],"sourcesContent":["let hideTimerId = null;\n\nconst NOTIF = {\n  rootId: 'js-global-notification',\n  textId: 'js-global-notification-text',\n  closeId: 'js-global-notification-close',\n  visibleClass: 'global-notification--visible',\n  errorClass: 'global-notification--error',\n  warningClass: 'global-notification--warning',\n};\n\nfunction getNodes() {\n  return {\n    root: document.getElementById(NOTIF.rootId),\n    text: document.getElementById(NOTIF.textId),\n    closeBtn: document.getElementById(NOTIF.closeId),\n  };\n}\n\nfunction clearTimer() {\n  if (hideTimerId) {\n    clearTimeout(hideTimerId);\n    hideTimerId = null;\n  }\n}\n\nfunction setTypeClass(rootEl, type) {\n  rootEl.classList.remove(NOTIF.errorClass, NOTIF.warningClass);\n\n  if (type === 'error') rootEl.classList.add(NOTIF.errorClass);\n  if (type === 'warning') rootEl.classList.add(NOTIF.warningClass);\n}\n\n/**\n * Shows a global notification message\n * @param {string} message\n * @param {'success'|'error'|'warning'} type\n */\nexport function showGlobalNotification(message, type = 'success') {\n  const { root, text } = getNodes();\n  if (!root || !text) return;\n\n  clearTimer();\n\n  text.textContent = message;\n  setTypeClass(root, type);\n\n  root.classList.add(NOTIF.visibleClass);\n\n  hideTimerId = setTimeout(() => {\n    hideGlobalNotification();\n  }, 3000);\n}\n\nexport function hideGlobalNotification() {\n  const { root, text } = getNodes();\n  if (!root) return;\n\n  clearTimer();\n\n  root.classList.remove(NOTIF.visibleClass);\n\n  setTimeout(() => {\n    if (text) text.textContent = '';\n    root.classList.remove(NOTIF.errorClass, NOTIF.warningClass);\n  }, 300);\n}\n\nexport function initGlobalNotification() {\n  const { closeBtn } = getNodes();\n  closeBtn?.addEventListener('click', hideGlobalNotification);\n}\n\n","const CLASS_MAP = [\n  { match: 'rating-modal__textarea', errorClass: 'rating-modal__textarea--error' },\n  { match: 'rating-modal__input', errorClass: 'rating-modal__input--error' },\n  { match: 'footer__subscribe-form-input', errorClass: 'footer__subscribe-form-input--error' },\n];\n\nfunction resolveErrorClass(fieldEl) {\n  if (!fieldEl) return 'form-field--error';\n\n  const found = CLASS_MAP.find(item => fieldEl.classList.contains(item.match));\n  return found ? found.errorClass : 'form-field--error';\n}\n\n/**\n\n * @param {HTMLElement|null} fieldEl\n * @param {HTMLElement|null} errorEl\n * @param {string} message\n */\nexport function showFieldError(fieldEl, errorEl, message) {\n  if (fieldEl) {\n    fieldEl.classList.add(resolveErrorClass(fieldEl));\n  }\n\n  if (errorEl) {\n    errorEl.textContent = message;\n    errorEl.classList.add('form-error--visible');\n  }\n}\n\n/**\n * @param {HTMLElement|null} fieldEl\n * @param {HTMLElement|null} errorEl\n */\nexport function hideFieldError(fieldEl, errorEl) {\n  if (fieldEl) {\n    fieldEl.classList.remove(\n      'rating-modal__input--error',\n      'rating-modal__textarea--error',\n      'footer__subscribe-form-input--error',\n      'form-field--error'\n    );\n  }\n\n  if (errorEl) {\n    errorEl.textContent = '';\n    errorEl.classList.remove('form-error--visible');\n  }\n}\n\n/**\n * \n * @param {string} email\n * @returns {boolean}\n */\nexport function validateEmail(email) {\n  const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n  return emailRegex.test(email);\n}\n\n/**\n * \n * @param {string} value\n * @returns {boolean}\n */\nexport function validateRequired(value) {\n  return value.trim().length > 0;\n}\n\n\nexport function initFooterYear() {\n  const yearEl = document.getElementById('year');\n  if (!yearEl) return;\n\n  yearEl.textContent = String(new Date().getFullYear());\n}\n","import { showGlobalNotification } from './global-notification.js';\nimport { showFieldError, hideFieldError, validateEmail } from './form-validation.js';\n\nconst API_BASE = 'https://your-energy.b.goit.study/api';\n\nconst SELECTORS = {\n  modal: 'js-rating-modal',\n  closeBtn: 'js-rating-modal-close',\n  form: 'js-rating-modal-form',\n  email: 'js-rating-modal-email',\n  comment: 'js-rating-modal-comment',\n  value: 'js-rating-modal-value',\n  stars: '.rating-modal__star',\n\n  emailError: 'js-email-error',\n  commentError: 'js-comment-error',\n  ratingError: 'js-rating-error',\n\n  serverBox: 'js-rating-server-message',\n  serverText: 'js-rating-server-message-text',\n  serverClose: 'js-rating-server-message-close',\n};\n\nconst STAR_ACTIVE_CLASS = 'rating-modal__star--active';\nconst MODAL_OPEN_CLASS = 'rating-modal--open';\n\nconst STAR_ACTIVE_COLOR = '#EEA10C';\nconst STAR_DEFAULT_STROKE = 'currentColor';\n\nlet exerciseIdForRating = null;\n\n\nfunction byId(id) {\n  return document.getElementById(id);\n}\n\nfunction getModalNodes() {\n  const modal = byId(SELECTORS.modal);\n\n  return {\n    modal,\n    overlay: modal?.querySelector('.rating-modal__overlay') || null,\n    closeBtn: byId(SELECTORS.closeBtn),\n    form: byId(SELECTORS.form),\n    email: byId(SELECTORS.email),\n    comment: byId(SELECTORS.comment),\n    value: byId(SELECTORS.value),\n    stars: Array.from(document.querySelectorAll(SELECTORS.stars)),\n    emailError: byId(SELECTORS.emailError),\n    commentError: byId(SELECTORS.commentError),\n    ratingError: byId(SELECTORS.ratingError),\n    serverBox: byId(SELECTORS.serverBox),\n    serverText: byId(SELECTORS.serverText),\n    serverClose: byId(SELECTORS.serverClose),\n  };\n}\n\n\nfunction setServerMessage(text, type = 'error') {\n  const { serverBox, serverText } = getModalNodes();\n  if (!serverBox || !serverText) return;\n\n  serverText.textContent = text;\n\n  serverBox.classList.remove(\n    'rating-modal__server-message--error',\n    'rating-modal__server-message--success'\n  );\n  serverBox.classList.add(`rating-modal__server-message--${type}`);\n  serverBox.classList.add('rating-modal__server-message--visible');\n}\n\nfunction clearServerMessage() {\n  const { serverBox, serverText } = getModalNodes();\n  if (!serverBox) return;\n\n  serverBox.classList.remove('rating-modal__server-message--visible');\n  serverBox.classList.remove(\n    'rating-modal__server-message--error',\n    'rating-modal__server-message--success'\n  );\n\n  if (serverText) serverText.textContent = '';\n}\n\nfunction paintStar(starBtn, isActive) {\n  const svg = starBtn.querySelector('svg');\n  const path = svg?.querySelector('path');\n  if (!path) return;\n\n  if (isActive) {\n    path.setAttribute('fill', STAR_ACTIVE_COLOR);\n    path.setAttribute('stroke', STAR_ACTIVE_COLOR);\n  } else {\n    path.setAttribute('fill', 'none');\n    path.setAttribute('stroke', STAR_DEFAULT_STROKE);\n  }\n}\n\nfunction setStars(rating) {\n  const { stars } = getModalNodes();\n\n  stars.forEach((star, idx) => {\n    const shouldBeActive = idx < rating;\n    star.classList.toggle(STAR_ACTIVE_CLASS, shouldBeActive);\n    paintStar(star, shouldBeActive);\n  });\n}\n\nfunction getSelectedRating() {\n  const { stars } = getModalNodes();\n\n  let rating = 0;\n  stars.forEach((star, idx) => {\n    if (star.classList.contains(STAR_ACTIVE_CLASS)) {\n      rating = Math.max(rating, idx + 1);\n    }\n  });\n\n  return rating;\n}\n\nfunction resetFormUI() {\n  const {\n    form,\n    value,\n    email,\n    comment,\n    emailError,\n    commentError,\n    ratingError,\n    stars,\n  } = getModalNodes();\n\n  if (form) form.reset();\n  if (value) value.textContent = '0.0';\n\n  hideFieldError(email, emailError);\n  hideFieldError(comment, commentError);\n  hideFieldError(null, ratingError);\n\n  clearServerMessage();\n\n  stars.forEach(star => {\n    star.classList.remove(STAR_ACTIVE_CLASS);\n    paintStar(star, false);\n    star.style.color = ''; \n  });\n}\n\nfunction validateForm() {\n  const { email, comment, emailError, commentError, ratingError } = getModalNodes();\n\n  const rating = getSelectedRating();\n  const emailValue = email?.value.trim() || '';\n  const commentValue = comment?.value.trim() || '';\n\n  let hasErrors = false;\n\n  if (rating === 0) {\n    showFieldError(null, ratingError, 'Please select a rating');\n    hasErrors = true;\n  } else {\n    hideFieldError(null, ratingError);\n  }\n\n  if (!emailValue) {\n    showFieldError(email, emailError, 'Please enter your email');\n    hasErrors = true;\n  } else if (!validateEmail(emailValue)) {\n    showFieldError(email, emailError, 'Please enter a valid email address');\n    hasErrors = true;\n  } else {\n    hideFieldError(email, emailError);\n  }\n\n  if (!commentValue) {\n    showFieldError(comment, commentError, 'Please enter your comment');\n    hasErrors = true;\n  } else {\n    hideFieldError(comment, commentError);\n  }\n\n  return { hasErrors, rating, emailValue, commentValue };\n}\n\nexport function openRatingModal(exerciseId) {\n  const { modal } = getModalNodes();\n  if (!modal) return;\n\n  exerciseIdForRating = exerciseId;\n\n  resetFormUI();\n\n  modal.classList.add(MODAL_OPEN_CLASS);\n  document.body.style.overflow = 'hidden';\n}\n\nfunction closeRatingModalInner() {\n  const { modal } = getModalNodes();\n  if (!modal) return;\n\n  modal.classList.remove(MODAL_OPEN_CLASS);\n  document.body.style.overflow = '';\n\n  exerciseIdForRating = null;\n\n  resetFormUI();\n}\n\nexport { closeRatingModalInner as closeRatingModal };\n\nasync function sendRating({ exerciseId, rate, email, review }) {\n  const response = await fetch(`${API_BASE}/exercises/${exerciseId}/rating`, {\n    method: 'PATCH',\n    headers: { 'Content-Type': 'application/json' },\n    body: JSON.stringify({ rate, email, review }),\n  });\n\n  const data = await response.json().catch(() => ({}));\n\n  if (!response.ok) {\n    const message = data?.message || 'Failed to submit rating. Please try again.';\n    throw new Error(message);\n  }\n\n  return data;\n}\n\nexport function initRatingModal() {\n  const { modal, overlay, closeBtn, serverClose, stars, value, email, comment, form, ratingError } =\n    getModalNodes();\n\n  if (!modal) return;\n\n  closeBtn?.addEventListener('click', closeRatingModalInner);\n  overlay?.addEventListener('click', closeRatingModalInner);\n\n  serverClose?.addEventListener('click', clearServerMessage);\n\n  email?.addEventListener('input', () => {\n    const { emailError } = getModalNodes();\n    hideFieldError(email, emailError);\n  });\n\n  comment?.addEventListener('input', () => {\n    const { commentError } = getModalNodes();\n    hideFieldError(comment, commentError);\n  });\n\n  stars.forEach((star, idx) => {\n    star.addEventListener('click', () => {\n      const selected = idx + 1;\n\n      if (value) value.textContent = selected.toFixed(1);\n\n      setStars(selected);\n      hideFieldError(null, ratingError);\n    });\n    star.addEventListener('mouseenter', () => {\n      const hover = idx + 1;\n      stars.forEach((s, i) => {\n        if (i < hover && !s.classList.contains(STAR_ACTIVE_CLASS)) {\n          s.style.color = 'rgba(255, 255, 255, 0.6)';\n        }\n      });\n    });\n\n    star.addEventListener('mouseleave', () => {\n      stars.forEach(s => {\n        if (!s.classList.contains(STAR_ACTIVE_CLASS)) {\n          s.style.color = 'rgba(255, 255, 255, 0.3)';\n        }\n      });\n    });\n  });\n\n  form?.addEventListener('submit', async e => {\n    e.preventDefault();\n\n    const { hasErrors, rating, emailValue, commentValue } = validateForm();\n    if (hasErrors) return;\n\n    if (!exerciseIdForRating) return;\n\n    clearServerMessage();\n\n    try {\n      const data = await sendRating({\n        exerciseId: exerciseIdForRating,\n        rate: rating,\n        email: emailValue,\n        review: commentValue,\n      });\n\n      closeRatingModalInner();\n\n      const exerciseName = data?.name || 'the exercise';\n      showGlobalNotification(\n        `Thank you, your review for exercise ${exerciseName} has been submitted`,\n        'success'\n      );\n    } catch (err) {\n      setServerMessage(err.message, 'error');\n    }\n  });\n}\n","const STORAGE_KEY = 'favorites';\n\nfunction readIds() {\n  try {\n    const raw = localStorage.getItem(STORAGE_KEY);\n    const parsed = raw ? JSON.parse(raw) : [];\n    return Array.isArray(parsed) ? parsed : [];\n  } catch {\n    return [];\n  }\n}\n\nfunction writeIds(list) {\n  try {\n    localStorage.setItem(STORAGE_KEY, JSON.stringify(list));\n    return true;\n  } catch {\n    return false;\n  }\n}\n\nexport function getFavorites() {\n  return readIds();\n}\n\nexport function isFavorite(exerciseId) {\n  return readIds().includes(exerciseId);\n}\n\nexport function addToFavorites(exerciseId) {\n  const ids = readIds();\n  if (ids.includes(exerciseId)) return false;\n\n  ids.push(exerciseId);\n  return writeIds(ids);\n}\n\nexport function removeFromFavorites(exerciseId) {\n  const ids = readIds();\n  const next = ids.filter(id => id !== exerciseId);\n  return writeIds(next);\n}\n\nexport function toggleFavorite(exerciseId) {\n  const ids = readIds();\n\n  if (ids.includes(exerciseId)) {\n    const next = ids.filter(id => id !== exerciseId);\n    writeIds(next);\n    return false; \n  }\n\n  ids.push(exerciseId);\n  writeIds(ids);\n  return true; \n}\n","import { switchToHome, switchToFavorites } from './exercises.js';\n\nlet activePage = 'home';\n\nlet refs = {\n  mobileMenu: null,\n  burger: null,\n  closeBtn: null,\n  overlay: null,\n};\n\nfunction setBodyLock(isLocked) {\n  document.body.style.overflow = isLocked ? 'hidden' : '';\n}\n\nfunction updateNavUI(page) {\n  document.querySelectorAll('.header__nav-link').forEach(link => {\n    link.classList.toggle(\n      'header__nav-link--active',\n      link.getAttribute('data-page') === page\n    );\n  });\n\n  document.querySelectorAll('.mobile-menu__nav-link').forEach(btn => {\n    btn.classList.toggle(\n      'mobile-menu__nav-link--active',\n      btn.getAttribute('data-page') === page\n    );\n  });\n}\n\nexport function switchPage(page) {\n  if (!page || page === activePage) return;\n\n  activePage = page;\n  updateNavUI(page);\n\n  if (page === 'home') switchToHome();\n  if (page === 'favorites') switchToFavorites();\n}\n\nfunction openMenu() {\n  if (!refs.mobileMenu) return;\n\n  refs.mobileMenu.classList.add('is-open');\n  refs.burger?.classList.add('is-hidden');\n  refs.overlay?.classList.add('active');\n  setBodyLock(true);\n}\n\nfunction closeMenu() {\n  if (!refs.mobileMenu) return;\n\n  refs.mobileMenu.classList.remove('is-open');\n  refs.burger?.classList.remove('is-hidden');\n  refs.overlay?.classList.remove('active');\n  setBodyLock(false);\n}\n\nfunction onNavClick(e) {\n  const target = e.target.closest('[data-page]');\n  if (!target) return;\n\n  e.preventDefault();\n\n  const page = target.getAttribute('data-page');\n  switchPage(page);\n\n  if (target.classList.contains('mobile-menu__nav-link')) {\n    closeMenu();\n  }\n}\n\nexport function initHeader() {\n  const desktopNav = document.querySelector('.header__nav');\n  desktopNav?.addEventListener('click', onNavClick);\n  refs.mobileMenu = document.querySelector('.mobile-menu');\n  refs.burger = document.querySelector('.header__burger');\n  refs.closeBtn = document.querySelector('.mobile-menu__close');\n  refs.overlay = document.getElementById('overlay');\n  refs.burger?.addEventListener('click', openMenu);\n  refs.closeBtn?.addEventListener('click', closeMenu);\n  const mobileNav = document.querySelector('.mobile-menu__nav');\n  mobileNav?.addEventListener('click', onNavClick);\n  refs.mobileMenu?.addEventListener('click', e => {\n    if (e.target === refs.mobileMenu) closeMenu();\n  });\n  updateNavUI(activePage);\n}\n\nexport function getCurrentPage() {\n  return activePage;\n}\n","import { openRatingModal } from './rating-modal.js';\nimport { isFavorite, toggleFavorite } from './favorites.js';\nimport { getCurrentPage } from './header.js';\nimport { loadFavoritesExercises } from './exercises.js';\n\nconst API_BASE = 'https://your-energy.b.goit.study/api';\n\nlet activeExerciseId = null;\n\nfunction getEl(id) {\n  return document.getElementById(id);\n}\n\nfunction openModal() {\n  const modal = getEl('js-exercise-modal');\n  if (!modal) return;\n\n  modal.classList.add('exercise-modal--open');\n  document.body.style.overflow = 'hidden';\n}\n\nfunction closeModal() {\n  const modal = getEl('js-exercise-modal');\n  if (!modal) return;\n\n  modal.classList.remove('exercise-modal--open');\n  document.body.style.overflow = '';\n}\n\nexport { closeModal as closeExerciseModal };\n\nasync function apiFetchExercise(exerciseId) {\n  const res = await fetch(`${API_BASE}/exercises/${exerciseId}`);\n  if (!res.ok) {\n    throw new Error('Failed to fetch exercise details');\n  }\n  return res.json();\n}\n\nfunction renderLoading() {\n  const title = getEl('js-exercise-modal-title');\n  const image = getEl('js-exercise-modal-image');\n  const ratingValue = document.querySelector('.exercise-modal__rating-value');\n\n  const target = getEl('js-exercise-modal-target');\n  const bodyPart = getEl('js-exercise-modal-body-part');\n  const equipment = getEl('js-exercise-modal-equipment');\n  const popular = getEl('js-exercise-modal-popular');\n  const calories = getEl('js-exercise-modal-calories');\n  const time = getEl('js-exercise-modal-time');\n  const description = getEl('js-exercise-modal-description');\n\n  if (title) title.textContent = 'Loading...';\n  if (ratingValue) ratingValue.textContent = '0.0';\n\n  if (target) target.textContent = '';\n  if (bodyPart) bodyPart.textContent = '';\n  if (equipment) equipment.textContent = '';\n  if (popular) popular.textContent = '0';\n  if (calories) calories.textContent = '0';\n  if (time) time.textContent = '/0 min';\n  if (description) description.textContent = '';\n\n  if (image) {\n    image.src = 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7';\n    image.alt = 'Exercise illustration';\n  }\n\n  paintStars(0);\n  syncFavoriteButton();\n}\n\nfunction renderError() {\n  const title = getEl('js-exercise-modal-title');\n  const description = getEl('js-exercise-modal-description');\n\n  if (title) title.textContent = 'Error loading exercise';\n  if (description) {\n    description.textContent =\n      'Failed to load exercise details. Please try again later.';\n  }\n\n  paintStars(0);\n  syncFavoriteButton();\n}\n\nfunction paintStars(rawRating) {\n  const starsWrap = document.querySelector('.exercise-modal__rating-stars');\n  if (!starsWrap) return;\n\n  const stars = starsWrap.querySelectorAll('.exercise-modal__rating-star');\n  const filled = Math.round(Number(rawRating || 0));\n\n  stars.forEach((star, idx) => {\n    const path = star.querySelector('path');\n    if (!path) return;\n\n    if (idx < filled) {\n      path.setAttribute('fill', '#EEA10C');\n      path.removeAttribute('stroke');\n      path.removeAttribute('stroke-width');\n    } else {\n      path.setAttribute('fill', 'none');\n      path.setAttribute('stroke', 'rgba(255,255,255,0.3)');\n      path.setAttribute('stroke-width', '1.5');\n    }\n  });\n}\n\nfunction syncFavoriteButton() {\n  const btn = getEl('js-exercise-modal-favorites');\n  if (!btn) return;\n\n  const label = btn.querySelector('span');\n  const iconPath = btn.querySelector('svg path');\n\n  const inFavorites = activeExerciseId ? isFavorite(activeExerciseId) : false;\n\n  btn.classList.toggle('active', inFavorites);\n\n  if (label) {\n    label.textContent = inFavorites ? 'Remove from favorites' : 'Add to favorites';\n  }\n\n  if (iconPath) {\n    if (inFavorites) {\n      iconPath.setAttribute('fill', 'currentColor');\n      iconPath.removeAttribute('stroke');\n      iconPath.removeAttribute('stroke-width');\n    } else {\n      iconPath.setAttribute('fill', 'none');\n      iconPath.setAttribute('stroke', 'currentColor');\n      iconPath.setAttribute('stroke-width', '2');\n    }\n  }\n}\n\nfunction fillExerciseData(exercise) {\n  const image = getEl('js-exercise-modal-image');\n  const title = getEl('js-exercise-modal-title');\n\n  const ratingValue = document.querySelector('.exercise-modal__rating-value');\n  const target = getEl('js-exercise-modal-target');\n  const bodyPart = getEl('js-exercise-modal-body-part');\n  const equipment = getEl('js-exercise-modal-equipment');\n  const popular = getEl('js-exercise-modal-popular');\n  const calories = getEl('js-exercise-modal-calories');\n  const time = getEl('js-exercise-modal-time');\n  const description = getEl('js-exercise-modal-description');\n\n  if (image) image.src = exercise.gifUrl || '';\n  if (title) title.textContent = exercise.name || '';\n\n  if (target) target.textContent = exercise.target || '';\n  if (bodyPart) bodyPart.textContent = exercise.bodyPart || '';\n  if (equipment) equipment.textContent = exercise.equipment || '';\n  if (popular) popular.textContent = String(exercise.popularity || 0);\n\n  if (calories) calories.textContent = String(exercise.burnedCalories || 0);\n  if (time) time.textContent = `/${exercise.time || 0} min`;\n  if (description) description.textContent = exercise.description || '';\n\n  const rating = Number(exercise.rating || 0);\n  if (ratingValue) ratingValue.textContent = rating.toFixed(1);\n\n  paintStars(rating);\n  syncFavoriteButton();\n}\n\nexport async function openExerciseModal(exerciseId) {\n  const modal = getEl('js-exercise-modal');\n  if (!modal) return;\n\n  activeExerciseId = exerciseId;\n\n  openModal();\n  renderLoading();\n\n  try {\n    const data = await apiFetchExercise(exerciseId);\n\n\n    if (activeExerciseId !== exerciseId) return;\n\n    fillExerciseData(data);\n  } catch (err) {\n    if (activeExerciseId !== exerciseId) return;\n    renderError();\n  }\n}\n\nexport function initExerciseModal() {\n  const modal = getEl('js-exercise-modal');\n  if (!modal) return;\n\n  const closeBtn = getEl('js-exercise-modal-close');\n  const overlay = modal.querySelector('.exercise-modal__overlay');\n\n  closeBtn?.addEventListener('click', closeModal);\n  overlay?.addEventListener('click', closeModal);\n\n\n  const favoritesBtn = getEl('js-exercise-modal-favorites');\n  favoritesBtn?.addEventListener('click', () => {\n    if (!activeExerciseId) return;\n\n    const wasAdded = toggleFavorite(activeExerciseId);\n    syncFavoriteButton();\n\n    if (!wasAdded && getCurrentPage() === 'favorites') {\n      closeModal();\n      loadFavoritesExercises();\n    }\n  });\n  const ratingBtn = getEl('js-exercise-modal-rating-btn');\n  ratingBtn?.addEventListener('click', () => {\n    if (!activeExerciseId) return;\n    closeModal();\n    openRatingModal(activeExerciseId);\n  });\n}\n\n","import { openExerciseModal } from './exercise-modal.js';\nimport { getFavorites } from './favorites.js';\nimport { showGlobalNotification } from './global-notification.js';\n\nconst API_BASE = 'https://your-energy.b.goit.study/api';\nconst ITEMS_PER_PAGE = 10;\n\nconst SELECTORS = {\n  content: '.exercises__content',\n  cards: '.exercises__content__main__cards',\n  pagination: '.exercises__content__pagination',\n  filtersBar: '.exercises__content__header-filters',\n  breadcrumbs: 'js-exercises-breadcrumbs',\n  searchWrap: 'js-exercises-search',\n  searchInput: 'js-exercises-search-input',\n  hashtags: '.home__hashtags',\n};\n\nconst CLS = {\n  cardsAsExercises: 'exercises__content__main__cards--exercises',\n  contentFavorites: 'exercises__content--favorites',\n\n  crumbItem: 'exercises__content__header-breadcrumbs-item',\n  crumbActive: 'exercises__content__header-breadcrumbs-item--active',\n  crumbSep: 'exercises__content__header-breadcrumbs-separator',\n\n  paginationArrow: 'exercises__content__pagination-arrow',\n  paginationPage: 'exercises__content__pagination-page',\n  paginationActive: 'exercises__content__pagination-page--active',\n  paginationDots: 'exercises__content__pagination-ellipsis',\n};\n\nconst state = {\n  mode: 'home', \n  filter: 'Muscles',\n  page: 1,\n  category: null,\n  keyword: '',\n};\n\n\nfunction qs(sel) {\n  return document.querySelector(sel);\n}\nfunction qsa(sel) {\n  return document.querySelectorAll(sel);\n}\nfunction byId(id) {\n  return document.getElementById(id);\n}\n\nfunction setDisplay(el, value) {\n  if (!el) return;\n  el.style.display = value;\n}\n\n\nasync function apiGet(path) {\n  const res = await fetch(`${API_BASE}${path}`);\n\n  return res;\n}\n\n\nfunction buildOptimizedImg(url, alt, className = '') {\n  if (!url) return '';\n\n  const proxy = 'https://wsrv.nl/?url=';\n\n  const sm = `${proxy}${url}&w=150&output=webp&q=75`;\n  const md = `${proxy}${url}&w=350&output=webp&q=75`;\n  const lg = `${proxy}${url}&w=700&output=webp&q=80`;\n\n  return `\n    <img\n      class=\"${className}\"\n      src=\"${md}\"\n      srcset=\"${sm} 150w, ${md} 350w, ${lg} 700w\"\n      sizes=\"(max-width: 767px) 150px, (max-width: 1440px) 350px, 350px\"\n      alt=\"${alt}\"\n      loading=\"lazy\"\n      decoding=\"async\"\n    />\n  `;\n}\n\n\nfunction showSearch() {\n  const wrap = byId(SELECTORS.searchWrap);\n  setDisplay(wrap, 'flex');\n}\n\nfunction hideSearchAndReset() {\n  const wrap = byId(SELECTORS.searchWrap);\n  const input = byId(SELECTORS.searchInput);\n\n  setDisplay(wrap, 'none');\n\n  if (input) input.value = '';\n  state.keyword = '';\n}\n\n\nfunction renderCards(htmlItems, asExercises = false) {\n  const container = qs(SELECTORS.cards);\n  if (!container) return;\n\n  container.innerHTML = '';\n  container.classList.toggle(CLS.cardsAsExercises, asExercises);\n\n  htmlItems.forEach(markup => container.insertAdjacentHTML('beforeend', markup));\n}\n\nfunction categoryCardMarkup(item) {\n  return `\n    <div class=\"exercises__content__main__cards-item\" data-category-name=\"${item.name}\">\n      <div class=\"exercises__content__main__cards-item-image\">\n        ${buildOptimizedImg(item.imgURL, `${item.name} exercise`)}\n        <div class=\"exercises__content__main__cards-item-overlay\">\n          <div class=\"exercises__content__main__cards-item-overlay-name\">${item.name}</div>\n          <div class=\"exercises__content__main__cards-item-overlay-category\">${item.filter}</div>\n        </div>\n      </div>\n    </div>\n  `;\n}\n\nfunction exerciseCardMarkup(ex) {\n  const rating = Number(ex.rating || 0);\n  const burnedCalories = ex.burnedCalories || 0;\n  const time = ex.time || 0;\n  const bodyPart = ex.bodyPart || '';\n  const target = ex.target || '';\n  const id = ex._id || '';\n\n  return `\n    <div class=\"exercises__content__main__cards-item exercises__content__main__cards-item--exercise\" data-exercise-id=\"${id}\">\n      <div class=\"exercises__content__main__cards-item-header\">\n        <button class=\"exercises__content__main__cards-item-workout-btn\">WORKOUT</button>\n\n        <div class=\"exercises__content__main__cards-item-rating\">\n          <span class=\"exercises__content__main__cards-item-rating-value\">${rating.toFixed(1)}</span>\n          <svg class=\"exercises__content__main__cards-item-rating-star\" width=\"18\" height=\"18\" viewBox=\"0 0 18 18\" fill=\"none\"\n            xmlns=\"http://www.w3.org/2000/svg\">\n            <path d=\"M9 0L11.0206 6.21885L17.5595 6.21885L12.2694 10.0623L14.2901 16.2812L9 12.4377L3.70993 16.2812L5.73056 10.0623L0.440492 6.21885L6.97937 6.21885L9 0Z\" fill=\"#EEA10C\"/>\n          </svg>\n        </div>\n\n        <button class=\"exercises__content__main__cards-item-start-btn\">\n          Start\n          <svg width=\"18\" height=\"18\" viewBox=\"0 0 18 18\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n            <path d=\"M6.75 4.5L11.25 9L6.75 13.5\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n          </svg>\n        </button>\n      </div>\n\n      <div class=\"exercises__content__main__cards-item-body\">\n        <div class=\"exercises__content__main__cards-item-icon\">\n          <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n            <path d=\"M12 2L2 7L12 12L22 7L12 2Z\" stroke=\"white\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n            <path d=\"M2 17L12 22L22 17\" stroke=\"white\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n            <path d=\"M2 12L12 17L22 12\" stroke=\"white\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n          </svg>\n        </div>\n\n        <h3 class=\"exercises__content__main__cards-item-title\">${ex.name}</h3>\n      </div>\n\n      <div class=\"exercises__content__main__cards-item-footer\">\n        <div class=\"exercises__content__main__cards-item-info\">\n          <span class=\"exercises__content__main__cards-item-info-label\">Burned calories:</span>\n          <span class=\"exercises__content__main__cards-item-info-value\">${burnedCalories}</span>\n          <span class=\"exercises__content__main__cards-item-info-label\">/ ${time} min</span>\n        </div>\n\n        <div class=\"exercises__content__main__cards-item-info\">\n          <span class=\"exercises__content__main__cards-item-info-label\">Body part:</span>\n          <span class=\"exercises__content__main__cards-item-info-value\">${bodyPart}</span>\n        </div>\n\n        <div class=\"exercises__content__main__cards-item-info\">\n          <span class=\"exercises__content__main__cards-item-info-label\">Target:</span>\n          <span class=\"exercises__content__main__cards-item-info-value\">${target}</span>\n        </div>\n      </div>\n    </div>\n  `;\n}\n\nfunction renderEmpty(message) {\n  renderCards(\n    [\n      `\n      <div class=\"exercises__content__main__empty-state\">\n        <p class=\"exercises__content__main__empty-state-text\">${message}</p>\n      </div>\n    `,\n    ],\n    true\n  );\n\n  const pag = qs(SELECTORS.pagination);\n  if (pag) pag.innerHTML = '';\n}\n\n\nexport function updateBreadcrumbs(categoryName = null) {\n  const box = byId(SELECTORS.breadcrumbs);\n  if (!box) return;\n\n  box.innerHTML = '';\n\n  if (state.mode === 'favorites') {\n    const btn = document.createElement('button');\n    btn.className = `${CLS.crumbItem} ${CLS.crumbActive}`;\n    btn.textContent = 'Favorites';\n    btn.setAttribute('data-breadcrumb', 'favorites');\n    box.appendChild(btn);\n    return;\n  }\n\n  const exercisesBtn = document.createElement('button');\n  exercisesBtn.className = CLS.crumbItem;\n  exercisesBtn.textContent = 'Exercises';\n  exercisesBtn.setAttribute('data-breadcrumb', 'exercises');\n\n  if (!categoryName) exercisesBtn.classList.add(CLS.crumbActive);\n\n  exercisesBtn.addEventListener('click', () => {\n    state.category = null;\n    state.page = 1;\n    loadExerciseCards(state.filter, 1);\n  });\n\n  box.appendChild(exercisesBtn);\n\n  if (!categoryName) return;\n\n  const sep = document.createElement('span');\n  sep.className = CLS.crumbSep;\n  sep.textContent = '/';\n  box.appendChild(sep);\n\n  const categoryBtn = document.createElement('button');\n  categoryBtn.className = `${CLS.crumbItem} ${CLS.crumbActive}`;\n  categoryBtn.textContent = categoryName;\n  box.appendChild(categoryBtn);\n}\n\n\nfunction buildPaginationModel(totalPages, current) {\n  const pages = [];\n\n  pages.push(1);\n\n  if (totalPages <= 7) {\n    for (let i = 2; i <= totalPages; i += 1) pages.push(i);\n    return pages;\n  }\n\n  let left = current - 1;\n  let right = current + 1;\n\n  if (current < 5) {\n    left = 2;\n    right = 5;\n  }\n\n  if (current > totalPages - 4) {\n    left = totalPages - 4;\n    right = totalPages - 1;\n  }\n\n  if (left > 2) pages.push('...');\n\n  for (let i = left; i <= right; i += 1) {\n    if (i > 1 && i < totalPages) pages.push(i);\n  }\n\n  if (right < totalPages - 1) pages.push('...');\n\n  pages.push(totalPages);\n\n  return pages;\n}\n\nfunction renderPagination(totalPages, page = 1) {\n  const box = qs(SELECTORS.pagination);\n  if (!box) return;\n\n  box.innerHTML = '';\n  if (totalPages <= 1) return;\n\n  const go = nextPage => {\n    state.page = nextPage;\n\n    if (state.mode === 'favorites') {\n      loadFavoritesExercises(nextPage);\n      return;\n    }\n\n    if (state.category) {\n      loadExercisesByCategory(state.category, nextPage, state.keyword);\n      return;\n    }\n\n    loadExerciseCards(state.filter, nextPage);\n  };\n\n  const mkArrow = (labelHtml, disabled, onClick) => {\n    const btn = document.createElement('button');\n    btn.className = CLS.paginationArrow;\n    btn.innerHTML = labelHtml;\n    btn.disabled = disabled;\n    btn.addEventListener('click', onClick);\n    return btn;\n  };\n\n  const mkPage = num => {\n    const btn = document.createElement('button');\n    btn.className = CLS.paginationPage;\n    btn.textContent = String(num);\n    if (num === page) btn.classList.add(CLS.paginationActive);\n    btn.addEventListener('click', () => go(num));\n    return btn;\n  };\n\n  const mkDots = () => {\n    const span = document.createElement('span');\n    span.className = CLS.paginationDots;\n    span.textContent = '...';\n    return span;\n  };\n\n  box.appendChild(mkArrow('&laquo;', page === 1, () => go(1)));\n  box.appendChild(mkArrow('&lsaquo;', page === 1, () => go(page - 1)));\n\n  const model = buildPaginationModel(totalPages, page);\n  model.forEach(item => {\n    if (item === '...') box.appendChild(mkDots());\n    else box.appendChild(mkPage(item));\n  });\n\n  box.appendChild(mkArrow('&rsaquo;', page === totalPages, () => go(page + 1)));\n  box.appendChild(mkArrow('&raquo;', page === totalPages, () => go(totalPages)));\n}\n\n\nfunction resolveCategoryParam() {\n  if (state.filter === 'Muscles') return 'muscles';\n  if (state.filter === 'Body parts') return 'bodypart';\n  if (state.filter === 'Equipment') return 'equipment';\n  return '';\n}\n\n\nexport function loadExerciseCards(filter, page = 1) {\n  state.filter = filter;\n  state.page = page;\n  state.category = null;\n\n  hideSearchAndReset();\n\n  const encodedFilter = encodeURIComponent(filter);\nconst url = `/filters?filter=${encodedFilter}&page=${page}&limit=${ITEMS_PER_PAGE}`;\n\n\n  apiGet(url)\n    .then(res => res.json())\n    .then(data => {\n      const items = data.results || data.exercises || data || [];\n      const totalPages = data.totalPages || data.total_pages || data.pageCount || 1;\n\n      updateBreadcrumbs(null);\n\n      if (Array.isArray(items) && items.length) {\n        renderCards(items.map(categoryCardMarkup), false);\n        renderPagination(totalPages, page);\n      } else {\n        renderCards([], false);\n        renderPagination(1, 1);\n      }\n    })\n    .catch(() => {\n      renderEmpty('Failed to load categories. Please try again later.');\n    });\n}\n\n\nexport function loadExercisesByCategory(categoryName, page = 1, keyword = state.keyword) {\n  state.category = categoryName;\n  state.page = page;\n  state.keyword = keyword;\n\n  showSearch();\n\n  const paramName = resolveCategoryParam();\n  const encodedCategory = encodeURIComponent(categoryName);\n\n  let url = `/exercises?${paramName}=${encodedCategory}&page=${page}&limit=${ITEMS_PER_PAGE}`;\n\n  const trimmed = (keyword || '').trim();\n  if (trimmed) {\n    url += `&keyword=${encodeURIComponent(trimmed)}`;\n  }\n\n  apiGet(url)\n    .then(async res => {\n\n      if (res.status === 409) return { results: [], totalPages: 0 };\n      if (!res.ok) throw new Error('Search failed');\n      return res.json();\n    })\n    .then(data => {\n      const list = data.results || [];\n      const totalPages = data.totalPages || 1;\n\n      updateBreadcrumbs(categoryName);\n\n      if (Array.isArray(list) && list.length) {\n        renderCards(list.map(exerciseCardMarkup), true);\n        renderPagination(totalPages, page);\n      } else {\n        renderEmpty(\n          'Unfortunately, no results were found. You may want to consider other search options.'\n        );\n      }\n    })\n    .catch(() => {\n      renderEmpty('Failed to load exercises. Please try again later.');\n    });\n}\n\n\nexport function initSearch() {\n  const wrap = byId(SELECTORS.searchWrap);\n  const input = byId(SELECTORS.searchInput);\n  if (!wrap || !input) return;\n\n  const runSearch = () => {\n    const keyword = input.value.trim().toLowerCase();\n\n    if (!state.category) {\n      showGlobalNotification('Please select a category first', 'error');\n      return;\n    }\n\n    loadExercisesByCategory(state.category, 1, keyword);\n  };\n\n  input.addEventListener('input', e => {\n    const value = e.target.value.trim();\n\n\n    if (value === '' && state.category) {\n      loadExercisesByCategory(state.category, 1, '');\n    }\n  });\n\n  input.addEventListener('keydown', e => {\n    if (e.key !== 'Enter') return;\n    e.preventDefault();\n    runSearch();\n  });\n\n  const icon = wrap.querySelector('.exercises__content__header-search-icon');\n  icon?.addEventListener('click', runSearch);\n}\n\n\nexport function initCardsEventListener() {\n  const container = qs(SELECTORS.cards);\n  if (!container) return;\n\n  container.addEventListener('click', e => {\n    const card = e.target.closest('.exercises__content__main__cards-item');\n    if (!card) return;\n\n    const categoryName = card.getAttribute('data-category-name');\n    if (categoryName) {\n      loadExercisesByCategory(categoryName);\n      return;\n    }\n\n    const exId = card.getAttribute('data-exercise-id');\n    if (exId) {\n      openExerciseModal(exId);\n    }\n  });\n}\n\n\nexport function initHashtags() {\n  const box = qs(SELECTORS.hashtags);\n  if (!box) return;\n\n  box.addEventListener('click', e => {\n    const btn = e.target.closest('button');\n    if (!btn) return;\n\n    const keyword =\n      btn.getAttribute('data-keyword') ||\n      btn.textContent.replace('#', '').trim();\n\n\n    if (state.mode !== 'home') {\n      const homeLink = qs('.header__nav-link[data-page=\"home\"]');\n      if (homeLink) homeLink.click();\n      else switchToHome();\n    }\n\n    const input = byId(SELECTORS.searchInput);\n    if (input) input.value = keyword;\n\n    const content = qs(SELECTORS.content);\n    content?.scrollIntoView({ behavior: 'smooth' });\n\n    if (state.category) {\n      loadExercisesByCategory(state.category, 1, keyword);\n    } else {\n      showGlobalNotification(\n        'Please select a category (e.g., abs) to start searching.',\n        'error'\n      );\n    }\n  });\n}\n\n\nfunction renderFavoritesEmpty() {\n  renderEmpty(\n    `It appears that you haven't added any exercises to your favorites yet.\nTo get started, you can add exercises that you like to your favorites for easier access in the future.`\n  );\n}\n\nexport function loadFavoritesExercises(page = 1) {\n  state.page = page;\n\n  updateBreadcrumbs(null);\n\n  const ids = getFavorites();\n  if (!ids.length) {\n    renderFavoritesEmpty();\n    return;\n  }\n\n  const totalPages = Math.ceil(ids.length / ITEMS_PER_PAGE);\n  const safePage = Math.min(Math.max(page, 1), totalPages);\n  state.page = safePage;\n\n  const start = (safePage - 1) * ITEMS_PER_PAGE;\n  const slice = ids.slice(start, start + ITEMS_PER_PAGE);\n\n  const requests = slice.map(id =>\n    apiGet(`/exercises/${id}`)\n      .then(res => (res.ok ? res.json() : null))\n      .catch(() => null)\n  );\n\n  Promise.all(requests).then(items => {\n    const valid = items.filter(Boolean);\n\n    if (valid.length) {\n      renderCards(valid.map(exerciseCardMarkup), true);\n      renderPagination(totalPages, safePage);\n    } else {\n      renderFavoritesEmpty();\n    }\n  });\n}\n\n\nexport function switchToHome() {\n  state.mode = 'home';\n  state.category = null;\n  state.keyword = '';\n\n  const filtersBar = qs(SELECTORS.filtersBar);\n  setDisplay(filtersBar, 'flex');\n\n  const content = qs(SELECTORS.content);\n  content?.classList.remove(CLS.contentFavorites);\n\n  loadExerciseCards(state.filter, 1);\n}\n\nexport function switchToFavorites() {\n  state.mode = 'favorites';\n  state.category = null;\n  state.keyword = '';\n\n  const filtersBar = qs(SELECTORS.filtersBar);\n  setDisplay(filtersBar, 'none');\n\n  hideSearchAndReset();\n\n  const content = qs(SELECTORS.content);\n  content?.classList.add(CLS.contentFavorites);\n\n  loadFavoritesExercises(1);\n}\n","import { showGlobalNotification } from './global-notification.js';\nimport { showFieldError, hideFieldError, validateEmail } from './form-validation.js';\n\nconst API_URL = 'https://your-energy.b.goit.study/api/subscription';\n\nexport function initFooterSubscription() {\n  const form = document.getElementById('subscribeForm');\n  const input = document.getElementById('subscribeEmail');\n  const errorBox = document.getElementById('subscribeEmailError');\n\n  if (!form || !input || !errorBox) return;\n\n  const clearErrorIfOk = () => {\n    const value = input.value.trim();\n    if (value === '' || validateEmail(value)) hideFieldError(input, errorBox);\n  };\n\n  input.addEventListener('input', clearErrorIfOk);\n\n  form.addEventListener('submit', async e => {\n    e.preventDefault();\n\n    const email = input.value.trim();\n\n    if (email === '') {\n      showFieldError(input, errorBox, 'Please enter your email address');\n      return;\n    }\n\n    if (!validateEmail(email)) {\n      showFieldError(\n        input,\n        errorBox,\n        'Please enter a valid email address (e.g. name@gmail.com)'\n      );\n      return;\n    }\n\n    hideFieldError(input, errorBox);\n\n    try {\n      const res = await fetch(API_URL, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ email }),\n      });\n\n      if (res.ok) {\n        const data = await res.json();\n        showGlobalNotification(data.message, 'success');\n        form.reset();\n        return;\n      }\n\n      if (res.status === 409) {\n        showGlobalNotification(\n          \"You've already subscribed. No need to resubscribe.\",\n          'warning'\n        );\n        form.reset();\n        return;\n      }\n\n      throw new Error(`Subscription failed: ${res.status}`);\n    } catch (err) {\n      showGlobalNotification(\n        'Something went wrong. Please try again later.',\n        'error'\n      );\n      console.error(err);\n    }\n  });\n}\n","const QUOTE_URL = 'https://your-energy.b.goit.study/api/quote';\nconst STORAGE_KEY = 'quote-cache-v1';\n\nfunction todayKey() {\n  const d = new Date();\n  const y = d.getFullYear();\n  const m = String(d.getMonth() + 1).padStart(2, '0');\n  const day = String(d.getDate()).padStart(2, '0');\n  return `${y}-${m}-${day}`;\n}\n\nfunction readCache() {\n  try {\n    const raw = localStorage.getItem(STORAGE_KEY);\n    return raw ? JSON.parse(raw) : null;\n  } catch {\n    return null;\n  }\n}\n\nfunction writeCache(payload) {\n  try {\n    localStorage.setItem(STORAGE_KEY, JSON.stringify(payload));\n  } catch {\n  }\n}\n\nasync function fetchQuote() {\n  const res = await fetch(QUOTE_URL);\n  if (!res.ok) throw new Error('Quote request failed');\n  return res.json();\n}\n\nasync function getQuoteData() {\n  const cache = readCache();\n  const today = todayKey();\n\n  if (cache?.date === today && cache?.quote && cache?.author) {\n    return { quote: cache.quote, author: cache.author };\n  }\n\n  try {\n    const data = await fetchQuote();\n    const normalized = {\n      date: today,\n      quote: data.quote,\n      author: data.author,\n    };\n\n    writeCache(normalized);\n    return { quote: normalized.quote, author: normalized.author };\n  } catch {\n    if (cache?.quote && cache?.author) {\n      return { quote: cache.quote, author: cache.author };\n    }\n    return null;\n  }\n}\n\nexport async function displayQuote() {\n  const quoteText = document.getElementById('js-exercises-quote-text');\n  const quoteAuthor = document.getElementById('js-exercises-quote-author');\n\n  const data = await getQuoteData();\n  if (!data) return;\n\n  if (quoteText) quoteText.textContent = data.quote;\n  if (quoteAuthor) quoteAuthor.textContent = data.author;\n}\n","import {\n  loadExerciseCards,\n  updateBreadcrumbs,\n  initSearch,\n  initCardsEventListener,\n  initHashtags,\n} from './js/exercises.js';\n\nimport { initExerciseModal, closeExerciseModal } from './js/exercise-modal.js';\nimport { initRatingModal, closeRatingModal } from './js/rating-modal.js';\n\nimport { initGlobalNotification } from './js/global-notification.js';\nimport { initFooterSubscription } from './js/email-validation.js';\nimport { initHeader } from './js/header.js';\nimport { displayQuote } from './js/quote.js';\n\nconst DEFAULT_FILTER = 'Muscles';\nconst DEFAULT_PAGE = 1;\n\nconst selectors = {\n  filterBtn: '.exercises__content__header-filters-item',\n  filterBtnActive:\n    '.exercises__content__header-filters-item--active',\n};\n\n\nfunction bootstrapApp() {\n\n  initExerciseModal();\n  initRatingModal();\n  initGlobalNotification();\n  initHeader();\n  initFooterSubscription();\n\n  initSearch();\n  initCardsEventListener();\n  initHashtags();\n\n\n  displayQuote();\n\n  loadExerciseCards(DEFAULT_FILTER, DEFAULT_PAGE);\n\n  setupEscapeToClose();\n  setupFilterSwitching();\n}\n\ndocument.addEventListener('DOMContentLoaded', bootstrapApp);\n\nfunction setupEscapeToClose() {\n  document.addEventListener('keydown', event => {\n    if (event.key !== 'Escape') return;\n\n    closeExerciseModal();\n    closeRatingModal();\n  });\n}\n\nfunction setupFilterSwitching() {\n  const buttons = document.querySelectorAll(selectors.filterBtn);\n  if (!buttons.length) return;\n\n  buttons.forEach(btn => {\n    btn.addEventListener('click', () => {\n      const nextFilter = btn.dataset.filter;\n      if (!nextFilter) return;\n\n      setActiveFilter(buttons, btn);\n      updateBreadcrumbs(null);\n      loadExerciseCards(nextFilter, DEFAULT_PAGE);\n    });\n  });\n}\n\nfunction setActiveFilter(allButtons, activeButton) {\n  allButtons.forEach(btn =>\n    btn.classList.remove(selectors.filterBtnActive.replace('.', ''))\n  );\n\n  activeButton.classList.add(selectors.filterBtnActive.replace('.', ''));\n}"],"names":["hideTimerId","NOTIF","getNodes","clearTimer","setTypeClass","rootEl","type","showGlobalNotification","message","root","text","hideGlobalNotification","initGlobalNotification","closeBtn","CLASS_MAP","resolveErrorClass","fieldEl","found","item","showFieldError","errorEl","hideFieldError","validateEmail","email","API_BASE","SELECTORS","STAR_ACTIVE_CLASS","MODAL_OPEN_CLASS","STAR_ACTIVE_COLOR","STAR_DEFAULT_STROKE","exerciseIdForRating","byId","id","getModalNodes","modal","setServerMessage","serverBox","serverText","clearServerMessage","paintStar","starBtn","isActive","svg","path","setStars","rating","stars","star","idx","shouldBeActive","getSelectedRating","resetFormUI","form","value","comment","emailError","commentError","ratingError","validateForm","emailValue","commentValue","hasErrors","openRatingModal","exerciseId","closeRatingModalInner","sendRating","rate","review","response","data","initRatingModal","overlay","serverClose","selected","hover","s","i","e","exerciseName","err","STORAGE_KEY","readIds","raw","parsed","writeIds","list","getFavorites","isFavorite","toggleFavorite","ids","next","activePage","refs","setBodyLock","isLocked","updateNavUI","page","link","btn","switchPage","switchToHome","switchToFavorites","openMenu","_a","_b","closeMenu","onNavClick","target","initHeader","desktopNav","mobileNav","_c","getCurrentPage","activeExerciseId","getEl","openModal","closeModal","apiFetchExercise","res","renderLoading","title","image","ratingValue","bodyPart","equipment","popular","calories","time","description","paintStars","syncFavoriteButton","renderError","rawRating","starsWrap","filled","label","iconPath","inFavorites","fillExerciseData","exercise","openExerciseModal","initExerciseModal","favoritesBtn","wasAdded","loadFavoritesExercises","ratingBtn","ITEMS_PER_PAGE","CLS","state","qs","sel","setDisplay","el","apiGet","buildOptimizedImg","url","alt","className","proxy","sm","md","lg","showSearch","wrap","hideSearchAndReset","input","renderCards","htmlItems","asExercises","container","markup","categoryCardMarkup","exerciseCardMarkup","ex","burnedCalories","renderEmpty","pag","updateBreadcrumbs","categoryName","box","exercisesBtn","loadExerciseCards","sep","categoryBtn","buildPaginationModel","totalPages","current","pages","left","right","renderPagination","go","nextPage","loadExercisesByCategory","mkArrow","labelHtml","disabled","onClick","mkPage","num","mkDots","span","resolveCategoryParam","filter","items","keyword","paramName","encodedCategory","trimmed","initSearch","runSearch","icon","initCardsEventListener","card","exId","initHashtags","homeLink","content","renderFavoritesEmpty","safePage","start","requests","valid","filtersBar","API_URL","initFooterSubscription","errorBox","clearErrorIfOk","QUOTE_URL","todayKey","d","y","m","day","readCache","writeCache","payload","fetchQuote","getQuoteData","cache","today","normalized","displayQuote","quoteText","quoteAuthor","DEFAULT_FILTER","DEFAULT_PAGE","selectors","bootstrapApp","setupEscapeToClose","setupFilterSwitching","event","closeExerciseModal","closeRatingModal","buttons","nextFilter","setActiveFilter","allButtons","activeButton"],"mappings":"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"}